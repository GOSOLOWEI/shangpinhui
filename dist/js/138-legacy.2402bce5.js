"use strict";(self["webpackChunksph_21_1227"]=self["webpackChunksph_21_1227"]||[]).push([[138],{138:function(a,e,t){t.r(e),t.d(e,{default:function(){return C}});var r=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"outer"},[t("TypeNav"),t("div",{staticClass:"main"},[t("div",{staticClass:"py-container"},[t("div",{staticClass:"bread"},[a._m(0),t("ul",{staticClass:"fl sui-tag"},[t("li",{directives:[{name:"show",rawName:"v-show",value:a.searchParams.categoryName,expression:"searchParams.categoryName"}],staticClass:"with-x"},[a._v(" "+a._s(a.searchParams.categoryName)+" "),t("i",{on:{click:a.removeCategoryName}},[a._v("×")])]),t("li",{directives:[{name:"show",rawName:"v-show",value:a.searchParams.keyword,expression:"searchParams.keyword"}],staticClass:"with-x"},[a._v(" "+a._s(a.searchParams.keyword)+" "),t("i",{on:{click:a.removeKeyword}},[a._v("×")])]),t("li",{directives:[{name:"show",rawName:"v-show",value:a.searchParams.trademark,expression:"searchParams.trademark"}],staticClass:"with-x"},[a._v(" "+a._s(a.fmtTrademark)+" "),t("i",{on:{click:a.removeTrademark}},[a._v("×")])]),a._l(a.searchParams.props,(function(e,r){return t("li",{key:r,staticClass:"with-x"},[a._v(" "+a._s(a.fmtProps(e))+" "),t("i",{on:{click:function(e){return a.removeProp(r)}}},[a._v("×")])])}))],2)]),t("SearchSelector",{directives:[{name:"show",rawName:"v-show",value:a.total,expression:"total"}],on:{"send-trademark":a.saveTrademark,"send-attr":a.saveAttr}}),t("div",{directives:[{name:"show",rawName:"v-show",value:a.total,expression:"total"}],staticClass:"details clearfix"},[t("div",{staticClass:"sui-navbar"},[t("div",{staticClass:"navbar-inner filter"},[t("ul",{staticClass:"sui-nav"},[t("li",{class:{active:!a.isPrice},on:{click:function(e){return a.changeOrder(1)}}},[t("a",[a._v(" 综合 "),t("span",{directives:[{name:"show",rawName:"v-show",value:!a.isPrice,expression:"!isPrice"}],staticClass:"iconfont",class:a.iconName})])]),t("li",{class:{active:a.isPrice},on:{click:function(e){return a.changeOrder(2)}}},[t("a",[a._v(" 价格 "),t("span",{directives:[{name:"show",rawName:"v-show",value:a.isPrice,expression:"isPrice"}],staticClass:"iconfont",class:a.iconName})])])])])]),t("div",{staticClass:"goods-list"},[t("ul",{staticClass:"yui3-g"},a._l(a.goodsList,(function(e){return t("li",{key:e.id,staticClass:"yui3-u-1-5"},[t("div",{staticClass:"list-wrap"},[t("div",{staticClass:"p-img"},[t("router-link",{attrs:{to:"/detail/"+e.id}},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.defaultImg,expression:"good.defaultImg"}]})])],1),t("div",{staticClass:"price"},[t("strong",[t("em",[a._v("¥")]),t("i",[a._v(a._s(e.price))])])]),t("div",{staticClass:"attr"},[t("router-link",{attrs:{to:"/detail/"+e.id},domProps:{innerHTML:a._s(e.title)}})],1),a._m(1,!0)])])})),0)]),t("Pagination",{attrs:{total:a.total,pageSize:a.searchParams.pageSize,pageNo:a.searchParams.pageNo,continues:5,sendPageNo:a.changePageNo}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!a.total,expression:"!total"}],staticClass:"empty"},[t("img",{attrs:{src:"https://static.360buyimg.com/devfe/error-new/1.0.0/css/i/error_06.png",alt:""}}),t("h1",[a._v("抱歉，搜索结果为空！")])])],1)])],1)},s=[function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ul",{staticClass:"fl sui-breadcrumb"},[t("li",[t("span",{attrs:{href:"#"}},[a._v("全部结果")])])])},function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"operate"},[t("a",{staticClass:"sui-btn btn-bordered btn-danger",attrs:{href:"success-cart.html",target:"_blank"}},[a._v("加入购物车")]),t("a",{staticClass:"sui-btn btn-bordered",attrs:{href:"javascript:void(0);"}},[a._v("收藏")])])}];function i(a){if(Array.isArray(a))return a}t(2526),t(1817),t(1539),t(2165),t(8783),t(3948);function c(a,e){var t=null==a?null:"undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=t){var r,s,i=[],c=!0,n=!1;try{for(t=t.call(a);!(c=(r=t.next()).done);c=!0)if(i.push(r.value),e&&i.length===e)break}catch(o){n=!0,s=o}finally{try{c||null==t["return"]||t["return"]()}finally{if(n)throw s}}return i}}t(7042),t(8309),t(1038),t(4916),t(7601);function n(a,e){(null==e||e>a.length)&&(e=a.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=a[t];return r}function o(a,e){if(a){if("string"===typeof a)return n(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);return"Object"===t&&a.constructor&&(t=a.constructor.name),"Map"===t||"Set"===t?Array.from(a):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(a,e):void 0}}t(1703);function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(a,e){return i(a)||c(a,e)||o(a,e)||l()}var h=t(4367),m=(t(4765),t(3123),t(6699),t(2023),t(561),t(4665)),d=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"clearfix selt"},[t("div",{staticClass:"type-wrap logo"},[t("div",{staticClass:"fl key brand"},[a._v("品牌")]),t("div",{staticClass:"value logos"},[t("ul",{staticClass:"logo-list"},a._l(a.trademarkList,(function(e){return t("li",{key:e.tmId,on:{click:function(t){return a.handleClickTrademark(e)}}},[a._v(" "+a._s(e.tmName)+" ")])})),0)])]),a._l(a.attrsList,(function(e){return t("div",{key:e.attrId,staticClass:"type-wrap"},[t("div",{staticClass:"fl key"},[a._v(a._s(e.attrName))]),t("div",{staticClass:"fl value"},[t("ul",{staticClass:"type-list"},a._l(e.attrValueList,(function(r,s){return t("li",{key:s},[t("a",{on:{click:function(t){return a.handleClickAttrValue(e,r)}}},[a._v(a._s(r))])])})),0)]),t("div",{staticClass:"fl ext"})])}))],2)},v=[],f={name:"SearchSelector",computed:(0,h.Z)({},(0,m.rn)({attrsList:function(a){return a.search.searchInfo.attrsList},trademarkList:function(a){return a.search.searchInfo.trademarkList}})),methods:{handleClickTrademark:function(a){this.$emit("send-trademark",a)},handleClickAttrValue:function(a,e){this.$emit("send-attr",a,e)}}},p=f,g=t(1001),y=(0,g.Z)(p,d,v,!1,null,"6baffa9b",null),k=y.exports,w={name:"Search",components:{SearchSelector:k},data:function(){return{searchParams:{category1Id:"",category2Id:"",category3Id:"",categoryName:"",keyword:"",props:[],trademark:"",order:"1:desc",pageNo:1,pageSize:5}}},computed:(0,h.Z)((0,h.Z)({},(0,m.rn)({goodsList:function(a){return a.search.searchInfo.goodsList},total:function(a){return a.search.searchInfo.total}})),{},{fmtTrademark:function(){return"品牌："+this.searchParams.trademark.split(":")[1]},isPrice:function(){return"2"===this.searchParams.order.split(":")[0]},iconName:function(){return"asc"===this.searchParams.order.split(":")[1]?"icon-up":"icon-down"}}),watch:{$route:{immediate:!0,handler:function(a){Object.assign(this.searchParams,{category1Id:"",category2Id:"",category3Id:"",categoryName:"",keyword:""},a.query),this.searchParams.pageNo=1,this.$store.dispatch("getSearchInfo",this.searchParams)}},searchParams:{deep:!0,handler:function(){this.$store.dispatch("getSearchInfo",this.searchParams)}}},methods:{removeCategoryName:function(){var a=this.$route.query.keyword;this.$router.push({path:"/search",query:{keyword:a}}),this.searchParams.pageNo=1},removeKeyword:function(){var a=this.$route.query;this.$router.push({path:"/search",query:(0,h.Z)((0,h.Z)({},a),{},{keyword:void 0})}),this.$bus.$emit("clear-keyword"),this.searchParams.pageNo=1},saveTrademark:function(a){console.log("我是Search组件",a),this.searchParams.trademark=a.tmId+":"+a.tmName,this.searchParams.pageNo=1},removeTrademark:function(){this.searchParams.trademark="",this.searchParams.pageNo=1},saveAttr:function(a,e){var t=a.attrId+":"+e+":"+a.attrName,r=this.searchParams.props.includes(t);r||(this.searchParams.props.push(t),this.searchParams.pageNo=1)},fmtProps:function(a){var e=a.split(":");return e[2]+"："+e[1]},removeProp:function(a){this.searchParams.props.splice(a,1),this.searchParams.pageNo=1},changePageNo:function(a){this.searchParams.pageNo=a},changeOrder:function(a){var e=this.searchParams.order.split(":"),t=u(e,2),r=t[0],s=t[1];if(a===1*r){var i="asc"===s?"desc":"asc";this.searchParams.order=r+":"+i}else this.searchParams.order=a+":desc";this.searchParams.pageNo=1}}},P=w,_=(0,g.Z)(P,r,s,!1,null,"026d7b7d",null),C=_.exports}}]);
//# sourceMappingURL=138-legacy.2402bce5.js.map