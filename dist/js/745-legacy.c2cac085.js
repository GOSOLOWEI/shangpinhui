"use strict";(self["webpackChunksph_21_1227"]=self["webpackChunksph_21_1227"]||[]).push([[745],{2998:function(t,e,o){o.r(e),o.d(e,{default:function(){return Pt}});var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"detail"},[o("TypeNav"),o("section",{staticClass:"con"},[o("div",{staticClass:"conPoin"},t._l(3,(function(e){return o("span",{key:e},[t._v(" "+t._s(t.info.categoryView["category"+e+"Name"])+" ")])})),0),o("div",{staticClass:"mainCon"},[o("div",{staticClass:"previewWrap"},[o("Zoom",{attrs:{imgurl:t.info.skuInfo.skuDefaultImg}}),o("ImageList",{attrs:{imgList:t.info.skuInfo.skuImageList}})],1),o("div",{staticClass:"InfoWrap"},[o("div",{staticClass:"goodsDetail"},[o("h3",{staticClass:"InfoName"},[t._v(t._s(t.info.skuInfo.skuName))]),o("p",{staticClass:"news"},[t._v(t._s(t.info.skuInfo.skuDesc))]),o("div",{staticClass:"priceArea"},[o("div",{staticClass:"priceArea1"},[o("div",{staticClass:"title"},[t._v("价      格")]),o("div",{staticClass:"price"},[o("i",[t._v("¥")]),o("em",[t._v(t._s(t.info.price))])])])])]),o("div",{staticClass:"choose"},[o("div",{staticClass:"chooseArea"},[o("div",{staticClass:"choosed"}),t._l(t.info.spuSaleAttrList,(function(e){return o("dl",{key:e.id},[o("dt",{staticClass:"title"},[t._v("选择"+t._s(e.saleAttrName))]),t._l(e.spuSaleAttrValueList,(function(i){return o("dd",{key:i.id,class:{active:"1"===i.isChecked},attrs:{changepirce:"0"},on:{click:function(o){return t.changeSpuSaleAttrValue(e.spuSaleAttrValueList,i.id)}}},[t._v(" "+t._s(i.saleAttrValueName))])}))],2)}))],2),o("div",{staticClass:"cartWrap"},[o("div",{staticClass:"controls"},[o("input",{staticClass:"itxt",attrs:{autocomplete:"off"},domProps:{value:t.goodNum},on:{change:function(e){return t.changeGoodNum("input",e)}}}),o("a",{staticClass:"plus",attrs:{href:"javascript:"},on:{click:function(e){return t.changeGoodNum("increment")}}},[t._v("+")]),o("a",{staticClass:"mins",attrs:{href:"javascript:"},on:{click:function(e){return t.changeGoodNum("decrement")}}},[t._v("-")])]),o("div",{staticClass:"add"},[o("a",{on:{click:t.handleAddCart}},[t._v("加入购物车")])])])])])])])],1)},s=[],r=o(6198),n=(o(1539),o(4747),o(4916),o(7601),o(9826),o(8862),o(8975),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{ref:"detail_swiper",staticClass:"swiper-container"},[o("div",{staticClass:"swiper-wrapper"},t._l(t.imgList,(function(e){return o("div",{key:e.id,staticClass:"swiper-slide"},[o("img",{attrs:{src:e.imgUrl},on:{click:function(o){return t.$bus.$emit("send-imgurl",e.imgUrl)}}})])})),0),o("div",{staticClass:"swiper-button-next"}),o("div",{staticClass:"swiper-button-prev"})])}),a=[],l=o(3264),c={name:"ImageList",props:["imgList"],watch:{imgList:function(){var t=this;this.$nextTick((function(){new l.Z(t.$refs.detail_swiper,{spaceBetween:30,speed:500,slidesPerView:"auto",navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}))}}},u=c,h=o(1001),d=(0,h.Z)(u,n,a,!1,null,"969142ec",null),m=d.exports,f=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"spec-preview"},[o("vue-photo-zoom-pro",{attrs:{url:t.afterImgurl||t.imgurl,"high-url":t.afterImgurl||t.imgurl,width:200,height:200,"out-zoomer":!0}})],1)},p=[];o(2526),o(1817),o(2165),o(8783),o(3948),o(9653),o(2222),o(8386),o(9601);function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}var g={name:"VuePhotoZoomProMask",props:{width:{type:Number,default:0},height:{type:Number,default:0},selector:{type:Object,default:function(){return{left:0,top:0,width:0,height:0}}},maskColor:{type:String,default:""}},computed:{topStyle:function(){var t=this.selector;return{width:"".concat(this.width,"px"),height:"".concat(t.top,"px")}},leftStyle:function(){var t=this.selector;return{width:"".concat(t.left,"px"),height:"".concat(t.height,"px")}},rightStyle:function(){var t=this.selector;return{width:"".concat(this.width-t.left-t.width,"px"),height:"".concat(t.height,"px")}},bottomStyle:function(){var t=this.selector;return{width:"".concat(this.width,"px"),height:"".concat(this.height-t.top-t.height,"px")}},maskStyle:function(){return{backgroundColor:this.maskColor}}}};function y(t,e,o,i,s,r,n,a,l,c){"boolean"!==typeof n&&(l=a,a=n,n=!1);var u,h="function"===typeof o?o.options:o;if(t&&t.render&&(h.render=t.render,h.staticRenderFns=t.staticRenderFns,h._compiled=!0,s&&(h.functional=!0)),i&&(h._scopeId=i),r?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},h._ssrRegister=u):e&&(u=n?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),u)if(h.functional){var d=h.render;h.render=function(t,e){return u.call(e),d(t,e)}}else{var m=h.beforeCreate;h.beforeCreate=m?[].concat(m,u):[u]}return o}var _=y,w=g,b=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mask",style:t.maskStyle},[o("div",{staticClass:"block top",style:t.topStyle}),t._v(" "),o("div",{staticClass:"block left",style:t.leftStyle}),t._v(" "),o("div",{staticClass:"block right",style:t.rightStyle}),t._v(" "),o("div",{staticClass:"block bottom",style:t.bottomStyle})])},C=[],k=void 0,S="data-v-728c6195",z=void 0,R=!1,x=_({render:b,staticRenderFns:C},k,w,S,R,z,!1,void 0,void 0,void 0),N={name:"VuePhotoZoomProZoomer",props:{left:{type:Number,default:0},top:{type:Number,default:0},scale:{type:Number,default:2},zoomRegion:{type:Object,default:function(){return{width:0,height:0}}},width:{type:Number,default:0},height:{type:Number,default:0}},computed:{zoomerStyle:function(){return{width:"".concat(this.width,"px"),height:"".concat(this.height,"px")}},positionStyle:function(){return{transform:"translate3d(".concat(-this.left,"px, ").concat(-this.top,"px, 0)")}},zoomedStyle:function(){var t=this.zoomRegion;return{transform:"scale(".concat(this.scale,") translateZ(0)"),width:"".concat(t.width,"px"),height:"".concat(t.height,"px")}}}},Z=N,E=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"zoomer",style:t.zoomerStyle},[o("div",{staticClass:"position",style:t.positionStyle},[t.$slots.default?o("div",{staticClass:"custom-zoomer",style:t.zoomedStyle},[t._t("default")],2):t._e()])])},$=[],I=void 0,P="data-v-9dd5af42",H=void 0,L=!1,A=_({render:E,staticRenderFns:$},I,Z,P,L,H,!1,void 0,void 0,void 0),M={name:"VuePhotoZommProSelector",props:{left:{type:Number,default:0},top:{type:Number,default:0},width:{type:Number,default:0},height:{type:Number,default:0},type:{type:String,default:"square"}},computed:{selectorStyle:function(){return{width:"".concat(this.width,"px"),height:"".concat(this.height,"px"),transform:"translate3d(".concat(this.left,"px, ").concat(this.top,"px, 0)")}}}},O=M,F=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:["selector",t.type],style:t.selectorStyle},[t._t("default")],2)},W=[],V=void 0,T="data-v-2bf22088",j=void 0,B=!1,U=_({render:F,staticRenderFns:W},V,O,T,B,j,!1,void 0,void 0,void 0),D={name:"ImgPreview",props:{url:{type:String,default:""}}},G=D,X=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("img",t._g(t._b({staticClass:"img-region",staticStyle:{display:"block",width:"100%"},attrs:{src:t.url}},"img",t.$attrs,!1),t.$listeners))},q=[],Y=void 0,J=void 0,K=void 0,Q=!1,tt=_({render:X,staticRenderFns:q},Y,G,J,Q,K,!1,void 0,void 0,void 0),et={name:"ImgZoomer",props:{url:{type:String,default:""}}},ot=et,it=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("img",t._g(t._b({staticClass:"img-zoomer",staticStyle:{display:"block",width:"100%",height:"100%"},attrs:{src:t.url}},"img",t.$attrs,!1),t.$listeners))},st=[],rt=void 0,nt=void 0,at=void 0,lt=!1,ct=_({render:it,staticRenderFns:st},rt,ot,nt,lt,at,!1,void 0,void 0,void 0),ut=function(t){var e=t.getBoundingClientRect(),o=-1!==navigator.userAgent.indexOf("MSIE"),i=o&&"HTML"===t.tagName?-t.scrollTop:e.top;return{left:e.left,top:i,right:e.right,bottom:e.bottom,width:e.right-e.left,height:e.bottom-i}};function ht(t,e,o){var i=e,s=o;return Math.min(Math.max(t,i),s)}var dt=function(t,e){return{x:ht(t.x,e.left,e.right),y:ht(t.y,e.top,e.bottom)}},mt=function(t,e,o,i){return{left:o,top:i,right:t-o,bottom:e-i}},ft=function(){var t=document,e=t.documentElement,o=t.body,i=e.scrollTop||window.pageYOffset||o.scrollTop,s=e.scrollLeft||window.pageXOffset||o.scrollLeft;return{scrollTop:i,scrollLeft:s}};var pt={name:"VuePhotoZoomPro",components:{PhotoMask:x,Selector:U,Zoomer:A,ImgPreview:tt,ImgZoomer:ct},props:{width:{type:Number,default:168},height:{type:Number,default:-1},url:{type:String,default:""},highUrl:{type:String,default:""},type:{type:String,default:"square",validator:function(t){return-1!==["circle","square"].indexOf(t)}},scale:{type:Number,default:2},selector:{type:[Boolean,Object],default:!0},outZoomer:{type:[Boolean,Object],default:!1},disabledReactive:{type:Boolean,default:!1},disabledEvent:{type:Boolean,default:!1},mask:{type:Boolean,default:!1},maskColor:{type:String,default:""}},data:function(){return{mouseEnterFlag:!1,outZoomerTop:0,mouse:{x:0,y:0},zoomRegionRect:{left:0,top:0,width:0,height:0}}},computed:{selectorOptions:function(){return"object"===v(this.selector)?this.selector:{release:!1}},outZoomerOptions:function(){return"object"===v(this.outZoomer)?this.outZoomer:{sticky:!1}},selectorWidth:function(){return this.width},selectorHeight:function(){return this.height>-1?this.height:this.width},selectorHalfWidth:function(){return this.selectorWidth/2},selectorHalfHeight:function(){return this.selectorHeight/2},zoomerWidth:function(){return this.outZoomer?this.selectorWidth*this.scale:this.selectorWidth},zoomerHeight:function(){return this.outZoomer?this.selectorHeight*this.scale:this.selectorHeight},zoomerHalfWidth:function(){return this.zoomerWidth/2},zoomerHalfHeight:function(){return this.zoomerHeight/2},zoomRegionAbsolute:function(){var t=this.zoomRegionRect,e=ft(),o=e.scrollTop,i=e.scrollLeft;return{left:t.left+i,top:t.top+o}},pointBound:function(){var t=this.zoomRegionRect;return mt(t.width,t.height,this.selectorHalfWidth,this.selectorHalfHeight)},vPointBound:function(){var t=this.zoomRegionRect,e=this.scale;return mt(t.width*e,t.height*e,this.zoomerHalfWidth,this.zoomerHalfHeight)},point:function(){var t=this.mouse,e=this.selectorOptions;return e.release?t:dt(t,this.pointBound)},vPoint:function(){var t=this.mouse,e=this.scale,o=this.selectorOptions,i={x:t.x*e,y:t.y*e};return o.release?i:dt(i,this.vPointBound)},selectorProps:function(){var t=this.point;return{width:this.selectorWidth,height:this.selectorHeight,left:t.x-this.selectorHalfWidth,top:t.y-this.selectorHalfHeight}},zoomerProps:function(){var t=this.vPoint;return{scale:this.scale,zoomRegion:this.zoomRegionRect,width:this.zoomerWidth,height:this.zoomerHeight,left:t.x-this.zoomerHalfWidth,top:t.y-this.zoomerHalfHeight}},outZoomerPosition:function(){return{top:"".concat(this.outZoomerTop,"px")}}},watch:{scale:function(){this.handleMouseMove(this.pointerInfo)},zoomRegionRect:{handler:function(){this.$emit("update",this.zoomRegionRect)},deep:!0}},mounted:function(){this.$zoomRegion=this.$refs.zoomRegion,this.update(),this.$emit("created")},methods:{handleMouseEnter:function(){this.mouseEnter()},handleMouseMove:function(t){t=this.pointerInfo=t||this.pointerInfo;var e=t,o=e.pageX,i=e.pageY,s=this.zoomRegionAbsolute;this.mouseMove(o-s.left,i-s.top),this.outZoomer&&this.outZoomerOptions.sticky&&(this.outZoomerTop=Math.max(i-t.clientY,0))},handleMouseLeave:function(){this.mouseLeave()},mouseEnter:function(){!this.disabledReactive&&this.update(),this.mouseEnterFlag=!0},mouseMove:function(t,e){!this.disabledReactive&&this.update();var o=this.mouse;o.x=t,o.y=e},mouseLeave:function(){this.mouseEnterFlag=!1},update:function(){Object.assign(this.zoomRegionRect,ut(this.$zoomRegion))}}},vt=pt,gt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{ref:"zoomRegion",staticClass:"vue-photo-zoom-pro",on:{mouseenter:function(e){!t.disabledEvent&&t.handleMouseEnter(e)},mousemove:function(e){!t.disabledEvent&&t.handleMouseMove(e)},mouseleave:function(e){!t.disabledEvent&&t.handleMouseLeave(e)}}},[t.mask?o("PhotoMask",{directives:[{name:"show",rawName:"v-show",value:t.mouseEnterFlag,expression:"mouseEnterFlag"}],attrs:{width:t.zoomRegionRect.width,height:t.zoomRegionRect.height,"mask-color":t.maskColor,selector:t.selectorProps}}):t._e(),t._v(" "),t.selector?o("Selector",t._b({directives:[{name:"show",rawName:"v-show",value:t.mouseEnterFlag,expression:"mouseEnterFlag"}],attrs:{type:t.type}},"Selector",t.selectorProps,!1),[t.outZoomer?t._e():o("Zoomer",t._b({staticClass:"inner-zoomer"},"Zoomer",t.zoomerProps,!1),[t.highUrl||t.url?o("ImgZoomer",{attrs:{url:t.highUrl||t.url}}):t._e(),t._v(" "),t._t("zoomer")],2),t._v(" "),t._t("selector")],2):t._e(),t._v(" "),t.outZoomer?o("Zoomer",t._b({directives:[{name:"show",rawName:"v-show",value:t.mouseEnterFlag,expression:"mouseEnterFlag"}],staticClass:"out-zoomer",style:t.outZoomerPosition},"Zoomer",t.zoomerProps,!1),[t.highUrl||t.url?o("ImgZoomer",{attrs:{url:t.highUrl||t.url}}):t._e(),t._v(" "),t._t("zoomer")],2):t._e(),t._v(" "),t.url?o("ImgPreview",{attrs:{url:t.url}}):t._e(),t._v(" "),t._t("default")],2)},yt=[],_t=void 0,wt="data-v-2fc2bc82",bt=void 0,Ct=!1,kt=_({render:gt,staticRenderFns:yt},_t,vt,wt,Ct,bt,!1,void 0,void 0,void 0),St={name:"Zoom",props:["imgurl"],data:function(){return{afterImgurl:""}},components:{vuePhotoZoomPro:kt},mounted:function(){var t=this;this.$bus.$on("send-imgurl",(function(e){t.afterImgurl=e}))},beforeDestroy:function(){this.$bus.$off("send-imgurl")}},zt=St,Rt=(0,h.Z)(zt,f,p,!1,null,null,null),xt=Rt.exports,Nt=o(5892),Zt=o(7899),Et={name:"Detail",components:{ImageList:m,Zoom:xt},data:function(){return{goodNum:1,info:{categoryView:{},price:0,skuInfo:{},spuSaleAttrList:[]}}},methods:{getGoodDetailInfo:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function e(){var o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t.$route.params.id,e.next=3,(0,Nt.mj)(o);case 3:i=e.sent,200===i.code?(delete i.data.valuesSkuJson,Object.assign(t.info,i.data)):alert(i.message);case 5:case"end":return e.stop()}}),e)})))()},changeSpuSaleAttrValue:function(t,e){t.forEach((function(t){t.id===e?t.isChecked="1":t.isChecked="0"}))},changeGoodNum:function(t,e){if("input"===t){var o=e.target.value,i=Zt.er.test(o);this.goodNum=i?1*o:e.target.value=o>200?200:1}else"increment"===t?200===this.goodNum?alert("购买数量不能超过200！"):this.goodNum++:"decrement"===t&&(1===this.goodNum?alert("购买数量不能小于1！"):this.goodNum--)},handleAddCart:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function e(){var o,i,s,r,n,a,l,c,u,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t.$route.params.id,i=t.goodNum,e.next=4,(0,Nt.Az)(o,i);case 4:s=e.sent,200===s.code?(r=t.info.skuInfo,n=r.skuName,a=r.skuDefaultImg,l=t.info.price,c=t.goodNum,u=[],t.info.spuSaleAttrList.forEach((function(t){var e=t.spuSaleAttrValueList.find((function(t){return"1"===t.isChecked}));u.push(e.saleAttrName+"："+e.saleAttrValueName)})),h={name:n,url:a,price:l,goodNum:c,arr:u},sessionStorage.setItem("selectedGoodInfo",JSON.stringify(h)),t.$router.push("/addcart_success")):alert(s.message);case 6:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.getGoodDetailInfo()}},$t=Et,It=(0,h.Z)($t,i,s,!1,null,"00738138",null),Pt=It.exports}}]);
//# sourceMappingURL=745-legacy.c2cac085.js.map