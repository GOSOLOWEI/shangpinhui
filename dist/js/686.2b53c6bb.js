"use strict";(self["webpackChunksph_21_1227"]=self["webpackChunksph_21_1227"]||[]).push([[686],{6686:function(a,s,e){e.r(s),e.d(s,{default:function(){return g}});var t=function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("div",{staticClass:"outer"},[e("TypeNav"),e("div",{staticClass:"main"},[e("div",{staticClass:"py-container"},[e("div",{staticClass:"bread"},[a._m(0),e("ul",{staticClass:"fl sui-tag"},[e("li",{directives:[{name:"show",rawName:"v-show",value:a.searchParams.categoryName,expression:"searchParams.categoryName"}],staticClass:"with-x"},[a._v(" "+a._s(a.searchParams.categoryName)+" "),e("i",{on:{click:a.removeCategoryName}},[a._v("×")])]),e("li",{directives:[{name:"show",rawName:"v-show",value:a.searchParams.keyword,expression:"searchParams.keyword"}],staticClass:"with-x"},[a._v(" "+a._s(a.searchParams.keyword)+" "),e("i",{on:{click:a.removeKeyword}},[a._v("×")])]),e("li",{directives:[{name:"show",rawName:"v-show",value:a.searchParams.trademark,expression:"searchParams.trademark"}],staticClass:"with-x"},[a._v(" "+a._s(a.fmtTrademark)+" "),e("i",{on:{click:a.removeTrademark}},[a._v("×")])]),a._l(a.searchParams.props,(function(s,t){return e("li",{key:t,staticClass:"with-x"},[a._v(" "+a._s(a.fmtProps(s))+" "),e("i",{on:{click:function(s){return a.removeProp(t)}}},[a._v("×")])])}))],2)]),e("SearchSelector",{directives:[{name:"show",rawName:"v-show",value:a.total,expression:"total"}],on:{"send-trademark":a.saveTrademark,"send-attr":a.saveAttr}}),e("div",{directives:[{name:"show",rawName:"v-show",value:a.total,expression:"total"}],staticClass:"details clearfix"},[e("div",{staticClass:"sui-navbar"},[e("div",{staticClass:"navbar-inner filter"},[e("ul",{staticClass:"sui-nav"},[e("li",{class:{active:!a.isPrice},on:{click:function(s){return a.changeOrder(1)}}},[e("a",[a._v(" 综合 "),e("span",{directives:[{name:"show",rawName:"v-show",value:!a.isPrice,expression:"!isPrice"}],staticClass:"iconfont",class:a.iconName})])]),e("li",{class:{active:a.isPrice},on:{click:function(s){return a.changeOrder(2)}}},[e("a",[a._v(" 价格 "),e("span",{directives:[{name:"show",rawName:"v-show",value:a.isPrice,expression:"isPrice"}],staticClass:"iconfont",class:a.iconName})])])])])]),e("div",{staticClass:"goods-list"},[e("ul",{staticClass:"yui3-g"},a._l(a.goodsList,(function(s){return e("li",{key:s.id,staticClass:"yui3-u-1-5"},[e("div",{staticClass:"list-wrap"},[e("div",{staticClass:"p-img"},[e("router-link",{attrs:{to:"/detail/"+s.id}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.defaultImg,expression:"good.defaultImg"}]})])],1),e("div",{staticClass:"price"},[e("strong",[e("em",[a._v("¥")]),e("i",[a._v(a._s(s.price))])])]),e("div",{staticClass:"attr"},[e("router-link",{attrs:{to:"/detail/"+s.id},domProps:{innerHTML:a._s(s.title)}})],1),a._m(1,!0)])])})),0)]),e("Pagination",{attrs:{total:a.total,pageSize:a.searchParams.pageSize,pageNo:a.searchParams.pageNo,continues:5,sendPageNo:a.changePageNo}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:!a.total,expression:"!total"}],staticClass:"empty"},[e("img",{attrs:{src:"https://static.360buyimg.com/devfe/error-new/1.0.0/css/i/error_06.png",alt:""}}),e("h1",[a._v("抱歉，搜索结果为空！")])])],1)])],1)},r=[function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ul",{staticClass:"fl sui-breadcrumb"},[e("li",[e("span",{attrs:{href:"#"}},[a._v("全部结果")])])])},function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("div",{staticClass:"operate"},[e("a",{staticClass:"sui-btn btn-bordered btn-danger",attrs:{href:"success-cart.html",target:"_blank"}},[a._v("加入购物车")]),e("a",{staticClass:"sui-btn btn-bordered",attrs:{href:"javascript:void(0);"}},[a._v("收藏")])])}],i=(e(6699),e(4665)),c=function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("div",{staticClass:"clearfix selt"},[e("div",{staticClass:"type-wrap logo"},[e("div",{staticClass:"fl key brand"},[a._v("品牌")]),e("div",{staticClass:"value logos"},[e("ul",{staticClass:"logo-list"},a._l(a.trademarkList,(function(s){return e("li",{key:s.tmId,on:{click:function(e){return a.handleClickTrademark(s)}}},[a._v(" "+a._s(s.tmName)+" ")])})),0)])]),a._l(a.attrsList,(function(s){return e("div",{key:s.attrId,staticClass:"type-wrap"},[e("div",{staticClass:"fl key"},[a._v(a._s(s.attrName))]),e("div",{staticClass:"fl value"},[e("ul",{staticClass:"type-list"},a._l(s.attrValueList,(function(t,r){return e("li",{key:r},[e("a",{on:{click:function(e){return a.handleClickAttrValue(s,t)}}},[a._v(a._s(t))])])})),0)]),e("div",{staticClass:"fl ext"})])}))],2)},o=[],l={name:"SearchSelector",computed:{...(0,i.rn)({attrsList:a=>a.search.searchInfo.attrsList,trademarkList:a=>a.search.searchInfo.trademarkList})},methods:{handleClickTrademark(a){this.$emit("send-trademark",a)},handleClickAttrValue(a,s){this.$emit("send-attr",a,s)}}},n=l,h=e(1001),d=(0,h.Z)(n,c,o,!1,null,"6baffa9b",null),m=d.exports,u={name:"Search",components:{SearchSelector:m},data(){return{searchParams:{category1Id:"",category2Id:"",category3Id:"",categoryName:"",keyword:"",props:[],trademark:"",order:"1:desc",pageNo:1,pageSize:5}}},computed:{...(0,i.rn)({goodsList:a=>a.search.searchInfo.goodsList,total:a=>a.search.searchInfo.total}),fmtTrademark(){return"品牌："+this.searchParams.trademark.split(":")[1]},isPrice(){return"2"===this.searchParams.order.split(":")[0]},iconName(){return"asc"===this.searchParams.order.split(":")[1]?"icon-up":"icon-down"}},watch:{$route:{immediate:!0,handler(a){Object.assign(this.searchParams,{category1Id:"",category2Id:"",category3Id:"",categoryName:"",keyword:""},a.query),this.searchParams.pageNo=1,this.$store.dispatch("getSearchInfo",this.searchParams)}},searchParams:{deep:!0,handler(){this.$store.dispatch("getSearchInfo",this.searchParams)}}},methods:{removeCategoryName(){const{keyword:a}=this.$route.query;this.$router.push({path:"/search",query:{keyword:a}}),this.searchParams.pageNo=1},removeKeyword(){const{query:a}=this.$route;this.$router.push({path:"/search",query:{...a,keyword:void 0}}),this.$bus.$emit("clear-keyword"),this.searchParams.pageNo=1},saveTrademark(a){console.log("我是Search组件",a),this.searchParams.trademark=a.tmId+":"+a.tmName,this.searchParams.pageNo=1},removeTrademark(){this.searchParams.trademark="",this.searchParams.pageNo=1},saveAttr(a,s){const e=a.attrId+":"+s+":"+a.attrName,t=this.searchParams.props.includes(e);t||(this.searchParams.props.push(e),this.searchParams.pageNo=1)},fmtProps(a){const s=a.split(":");return s[2]+"："+s[1]},removeProp(a){this.searchParams.props.splice(a,1),this.searchParams.pageNo=1},changePageNo(a){this.searchParams.pageNo=a},changeOrder(a){const[s,e]=this.searchParams.order.split(":");if(a===1*s){let a="asc"===e?"desc":"asc";this.searchParams.order=s+":"+a}else this.searchParams.order=a+":desc";this.searchParams.pageNo=1}}},v=u,p=(0,h.Z)(v,t,r,!1,null,"026d7b7d",null),g=p.exports}}]);
//# sourceMappingURL=686.2b53c6bb.js.map